<!doctype html>
<html lang=en>
<head>
<title>jaanga osome globe r4</title>
<meta charset=utf-8 />
<script src=http://code.jquery.com/jquery-2.0.1.js ></script>
<script src=http://code.jquery.com/ui/1.10.3/jquery-ui.js ></script>
</head>
<body >
<div id="dialog" title="Jaanga oSome Globe R4 ~ Much Improved Resolution" >
	<div id="accordion" >
		<h3>Overview</h3>
			<div>
				
				<p>This revision introduces much improved 3D resolution of the topology for zoom levels 1 and 2. 
					The resolution is approximately one elevation data point per degree. Elevation is ridiculously exaggerated in the default. 
					3D topology is currently only supported at zoom levels 1, 2 and 3.
					Please ignore the extraneous debugging bits.</p>
					
				<p>Sea level is indicated by the blue-green-purple sphere.</p>	
				
				<p>This Jaanga cookbook section contains the demo for building a 3D Globe using <a href="http://threejs.org" target="_blank">Three.js</a> and 
					<a href="http://openstreetmap.org" target="_blank">Open Street Map</a> (OSM) data. 
					The app supports the full 18 levels of zoom provided by OSM. The tooltips for the '+' and '-" buttons display the current zoom level.</p>
				
				<p>The source code for the demo is available at: <a href='https://github.com/jaanga/cookbook/tree/gh-pages/osome-globe/r3' target='_blank'>github.com/jaanga/cookbook/</a></p>
				
				<p>Derivation of the name oSome Globe: oSome = OSM + awesome + "That's some Globe!"</p>
				
				<p>See also post on <a href="http://www.jaanga.com/2013/06/jaanga-osome-globe-full-3d-18-zoom.html" target="_blank">jaanga.com</a></p>
				
				<p>General controls:
					<ul>
						<li>Rotate globe: Left mouse / press 1 finger</li>
						<li>Zoom in current level: Mousewheel / two fingers</li>
						<li>Drag globe: Right mouse / press 2 fingers</li>
					</ul>
					
					<ul>
						<li>Click on the icons to zoom in and out, go home, refresh or straighten the view</li>
						<li>Use the drop down menus to jump to a zoom level or to set the height exaggeration scale</li>
						<li>zero = no scaling. negative numbers make the oceans go up and land masses go down. </li>
					</ul>
				</p>
				
				<p>Coming up next: more detail for level 3 zoom.</p>
				
			</div>
			

		<h3>Update Three.js Globe</h3>
			<div id = "updating" >
			
				<p><select id="" onchange="setZoomPreset( this.selectedIndex );">
					<option>Select a location</option>
					<option>Antony (near Paris)</option>
					<option>Australia</option>
					<option>Hong Kong</option>
					<option>Paris</option>
					<option>San Francisco</option>
					<option>Switzerland</option>
					<option>Wales</option>
					<option>World View</option>
					</select>
				</p>
				
				<p>It may take twenty seconds or so for the map to appear. The background will turn black until the data starts coming in.</p>
				
				<p>Coming soon:</p>
				
				<p>Sample 3D objects placed on selected levels. For example: Eiffel tower in Paris, Golden Gate Bridge in San Francisco and Opera House in Sydney.</p>
			
			</div>
		<h3>Change jQuery UI Theme</h3>
			<div>
				<p>Select a different <a href="http://jqueryui.com/themeroller/" target="_blank">jQuery UI theme</a>.</p>
				
				<p>jQuery Theme: <select id="selectTheme" onchange="setTheme( this.value);" >
						<!-- <option>base</option>  -->
						<option>black-tie</option>
						<option>blitzer</option>
						<option>cupertino</option>
						<option>dark-hive</option>
						<option>dot-luv</option>
						<option>eggplant</option>
						<option>excite-bike</option>
						<option>flick</option>
						<option>hot-sneaks</option>
						<option>humanity</option>
						<option>le-frog</option>
						<option>mint-choc</option>
						<option>overcast</option>
						<option>pepper-grinder</option>
						<option>redmond</option>
						<option>smoothness</option>
						<option>south-street</option>
						<option>start</option>
						<option>sunny</option>
						<option>swanky-purse</option>
						<option>trontastic</option>
						<option>ui-darkness</option>
						<option>ui-lightness</option>
						<option>vader</option>	
					</select>
				</p>
				
				<p>jQuery is a multi-browser JavaScript library designed to simplify the client-side scripting of HTML. 
					jQuery UI is a JavaScript library that provides abstractions for 
					low-level interaction, animation, advanced effects, high-level themeable widgets, 
					is built on top of the jQuery JavaScript library and is used to build interactive web applications.
					Both libraries are free, open source software, licensed under the MIT License.
				</p>
				
				<p>Jaanga oSome Globe uses both these libraries to create the user experience components of the app.</p>
				
				<p>In particular, Jaanga oSome Globe provides access to 25 sample themes hosted on the jQuery UI web site.</p>
				
				<p>Each time the theme is updated, a fresh URL is created which can be used as a permalink to save the theme selection for future use.
					Further revisions of Jaanga oSome Globe will provide further features that may be saved as part of the permalink feature.
				</p>
				
				<p>A nice benefit of the permalink concept is that your choices may be saved and shared without cookies being saved to your computer.</p>
			</div>	
		<h3>Credits, Copyright & License</h3>
			<div>
				<h4>Copyright</h4>
				
					<p>Copyright &copy; 2013 Jaanga contributors</p>
				<h4>License</h4>	
				
					<p>All software and documentation in this repository is available under the MIT license.</p>
					
					<p>The <a href="http://en.wikipedia.org/wiki/MIT_License" target"_blank">MIT License</a></p>
				
				<h4>Credits & Thanks</h4>
					<p><a href="http://openstreetmap.org/copyright" target="_blank">Open Street Map</a><br />copyright &copy; OpenStreetMap contributors</p>
					<p><a href="http://jquery.org/license" target="_blank">jQuery<br /></a>copyright &copy; The jQuery Foundation</p>
					<p><a href="https://github.com/jquery/jquery-ui/blob/master/MIT-LICENSE.txt" target="_blank">jQuery UI</a><br />Copyright &copy; 2013 jQuery Foundation and other contributors</p>
					<p><a href="http://mrdoob.github.io" target='_blank'>Three.js</a><br>Copyright &copy; 2010-2013 three.js authors</p>
					<p>In the course of preparing this app, data has been obtained via several servers including:</p>
					
					<p><a href="http://www.earthtools.org/" target="_blank">earthtools.org/</a></p>
					
					<p><a href="http://www.usgs.gov/" target="_blank">usgs.gov</a></p>
					
					<p><a href="http://www.gpsvisualizer.com/elevation.html" target="_blank">gpsvisualizer.com</a></p>
					
					<p><a href="https://developers.google.com/maps/" target="_blank">developers.google.com/maps/</a></p>
					
					<p>And many thanks to:</p>
					<p><a href='http://github.com' target='_blank'>GitHub</a></p>
					<p><a href="http://stackoverflow.com" target='_blank'>Stack Overflow</a></p>
					<p>The JavaScript DOM</p>
					
					<p>Jaume SÃ¡nchez and his "<a href="http://www.clicktorelease.com/code/blocky_earth/" target="_blank"></a>Blocky Earth" 
						for giving me the idea that elevations are obtainable and you can do reverse Mercator projections.</p>
					
					<p>See also and in particular <a href="http://fgx.github.io" target="_blank">FGx on GitHub</a> which has been the cause and the impetus for this globe.</p>
	
				<h4>Notes</h4>
						<p>All coding and testing is on currently carried out on Google Chrome only. On other browsers, this app may have even more issues.</p>	
						
						<p>This app is at an early and volatile stage. 
							Not all licensing requirements may not been fully met lat alone identified. 
							It is the intension of the authors to play fair and all such requirements will either be met or the feature in question will turned off.</p>
			
			</div>			
		<h3>To Be Done / Roadmap</h3>	
			<div>
				<p><s>Correct for reverse Mercator projection. *</s> 2013-06-02</p>
				<p><s>Fix quadrant issues with southern hemisphere level changes. *</s> 2013-05-31</p>
				<p><s>add exaggeration scale drop down menu.</s> 2013-06-09</p>
				<p>Zoom level 3 to 32 vertices per tile (now 16)</p>
				<p>Download elevation data for individual tiles at run-time.</p>
				<p>Improve/refine lights and color schemes.</p>
				<p>Adjust smoothness of globe automatically.</p>
				<p>Adjust the color correction of the globe.</p>
				<p><s>Add location and level navigation.</s> 2013-06-03</p>
				<p><s>Add 3D topology.</s> 2013-06-08</p>
				<p>Add permalinks.</p>
				<p>Fix issues where displayed date does not cross the date line.</p>
				<p>Ability to add data and code to particular locations and levels.</p>
				<p>Add windows - each with its own view of the globe, camera location and settings.</p>
				<p>Add camera movement after 30 seconds no mouse movement.</p>
				<p><s>Add home button that resets zoom, camera, level, etc to defaults.</s> 2013-05-31</p>
				<p>Don't remove then recall currently loaded bitmaps when panning</p>
				<p>Preload adjacent bitmaps</p>
				<p>Add level slider widget??</p>
				<p>Keep on tweaking camera zoom, pan and rotate settings.</p>
				<p>Better way of displaying current level.</p>
				<p>Access to Google Maps and others map data.</p>
				<p>* priority item</p>
			</div>
	</div>
</div>
<script>
	$(function() {
		var e = $.elements = {};
		e.theme = "pepper-grinder";
		e.groupScaleX = e.groupScaleY = e.groupScaleZ = 1;
		e.groupRotationY = -0.005;
		
// <link rel=stylesheet href=http://code.jquery.com/ui/1.10.3/themes/ui-darkness/jquery-ui.css />	
		var link = document.head.appendChild( document.createElement("link") );
		link.setAttribute("rel", "stylesheet");
		if ( location.hash === "" ) {
			link.setAttribute("href", "http://code.jquery.com/ui/1.10.2/themes/" + e.theme + "/jquery-ui.css");
		} else {
			var hashes = location.hash.split("#");
			e.theme = hashes[1].substr(6)
			link.setAttribute("href", "http://code.jquery.com/ui/1.10.2/themes/" + e.theme + "/jquery-ui.css");
		}	
		
		$( "body" ).css( { "font-size": "10pt", "margin":"0", "overflow":"hidden" } );
		
	    $("<iframe />", {
			css: { "height": window.innerHeight + "px", "position":"absolute", "width": window.innerWidth + "px" },
			id: "ifr",
            src: "threejs-osome-globe.html",
        }).appendTo("body");		
	
		$( "#dialog" ).dialog({
			height:  window.innerHeight * 0.8,
			position: {
				my: "left top",
				at: "left+" + 30 + " top+" + 20,
				of: window
			},
			width: "25%"
		});
		
		$( ".ui-dialog" ).css( { opacity: 0.80 } );
				
		$( "#accordion" ).accordion( {
			heightStyle: "fill"
		});


/*		
		$("<p title='Data sent by Three.js' >Rotation: <span id='status' ></span></p>").appendTo("#updating");

		$("<div id='slider1' title='jQuery setting values in Three.js'></div>").appendTo("#updating");		
		
		$( "#slider1" ).slider( {
			max: 0.2,
			min: -0.2,		
			slide: function( event, ui ) {
				e.groupRotationY = ui.value;
			},
			step: 0.01,
			value: e.cameraRotationY
		});	

		$("<p>Scale X:</p><div id='slider2' ></div>").appendTo("#updating");		 
		$( "#slider2" ).slider( {
			max: 2,
			min: 0.1,
			slide: function( event, ui ) {
				e.groupScaleX = ui.value;
			},
			step: 0.05,
			value: e.groupScaleX
		});			
		
		$("<p>Scale Y:</p><div id='slider3' ></div>").appendTo("#updating");		
		
		$( "#slider3" ).slider( {
			max: 2,
			min: 0.1,
			slide: function( event, ui ) {
				e.groupScaleY = ui.value;
			},
			step: 0.05,
			value: e.groupScaleY
		});			

		$("<p>Scale Z:</p><div id='slider4' ></div>").appendTo("#updating");		 
		$( "#slider4" ).slider( {
			max: 2,
			min: 0.1,
			slide: function( event, ui ) {
				e.groupScaleZ = ui.value;
			},
			step: 0.05,
			value: e.groupScaleZ
		});		
*/
		
		for (var i = 0, len = selectTheme.options.length; i < len; i++) {
			if ($.elements.theme == selectTheme.options[i].value ) {
				selectTheme.selectedIndex = i;
				break;
			}
		}
	
	});	
	
		function setTheme( theme ) {
			console.log( theme );
			location.hash = "theme=" + theme;
			window.history.pushState( "", "", window.location.hash);
			location.reload();
		}	
		
		function setZoomPreset( id ) {
			$("#ifr")[0].contentWindow.zoomPreset( id );
		}
</script>
</body>
</html>